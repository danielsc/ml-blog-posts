$schema: https://azuremlschemas.azureedge.net/latest/managedOnlineEndpoint.schema.json
name: fashion-endpoint-2
type: online
auth_mode: key
traffic:
  blue: 100

# VM is built from base Docker image + conda file, and has a GPU.
deployments:
  - name: blue
    model: azureml:pytorch-fashion-weights:1
    code_configuration:
      code:
        local_path: ../pytorch_src/
      scoring_script: score.py
    environment: azureml:pytorch-gpu-managed-inference-env:1
    instance_type: Standard_NC6s_v3
    scale_settings:
      scale_type: Manual
      instance_count: 2
      min_instances: 1
      max_instances: 2