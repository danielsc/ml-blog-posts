$schema: https://azuremlschemas.azureedge.net/latest/managedOnlineEndpoint.schema.json
name: fashion-pytorch-endpoint-10
type: online
auth_mode: key
traffic:
  blue: 100

deployments:
  - name: blue
    app_insights_enabled: true
    model: azureml:fashion-pytorch-model:1
    code_configuration:
        code:
            local_path: ../src/
        scoring_script: score.py
    environment: azureml:fashion-pytorch-env:1
    instance_type: Standard_F4s_v2
    scale_settings:
      scale_type: manual
      instance_count: 2
      min_instances: 1
      max_instances: 2
    request_settings:
      request_timeout_ms: 3000
      max_concurrent_requests_per_instance: 1
    liveness_probe:
      period: 10
      initial_delay: 10
      timeout: 2
      success_threshold: 1
      failure_threshold: 30
    readiness_probe:
      period: 10
      initial_delay: 10
      timeout: 2
      success_threshold: 1
      failure_threshold: 30
    